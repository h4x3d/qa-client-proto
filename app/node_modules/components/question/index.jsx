/*** @jsx React.DOM */
'use strict';

var React = require('react');
var moment = require('moment');
require('moment/locale/fi');

function formatTime (timestamp) {
  return moment(timestamp).fromNow();
}

module.exports = React.createClass({
  render: function () {

    var question = this.props.question;
    var numOfReplies = question.replies ? Object.keys(question.replies).length : 0;

    return (
      <div key={question.created} className="question">

        <h3>
          <a href="#">
            {question.message}
          </a>
        </h3>

        <div className="question__meta">
          <div className="question__meta__avatar">
            <img className="avatar" src="http://www.gravatar.com/avatar/12" />
          </div>
          <div className="question__meta__info">
            <div className="username">{question.user}</div>
            <a href="#">{numOfReplies} vastausta</a>
            <span className="timestamp">{formatTime(question.created)}</span>
          </div>
        </div>
      </div>
    );
  }
});
